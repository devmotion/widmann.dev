<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <script src="/libs/plotly/plotly.min.js"></script> <link rel=stylesheet  href="/libs/highlight/github.min.css"> <link rel=stylesheet  href="/css/jtd.css"> <link rel=icon  href="/assets/favicon.ico"> <title>Palmer penguins</title> <div class=page-wrap > <div class=side-bar > <div class=header > <a href="/" class=title > <img style="height:60px;" src="/assets/title.svg" alt="David Widmann" /> <style> @media (max-width: 31.25rem){ .side-bar .show-menu {height:30px;} } @media (max-width: 50rem) { .side-bar .header .title {padding-top:0; padding-bottom: 0;} .header .title img {height:60px; max-width: 100px !important;} } @media (min-width: 66.5rem){ .header .title img {max-width: 140px !important;} } </style> </a> </div> <label for=show-menu  class=show-menu >MENU</label> <input type=checkbox  id=show-menu  role=button > <div class=menu  id=side-menu > <ul class=menu-list > <li class="menu-list-item "><a href="/" class="menu-list-link ">Home</a> <li class="menu-list-item active"><a href="/blog/" class="menu-list-link active">Blog</a> <li class="menu-list-item "><a href="/research/" class="menu-list-link ">Research</a> <li class="menu-list-item "><a href="/about/" class="menu-list-link ">About</a> </ul> </div> <div class=footer > <a href="https://github.com/devmotion" title="GitHub profile"> <img class=icon  src="/assets/icons/github.svg" alt=GitHub ></a> <a href="https://gitlab.com/devmotion" title="GitLab profile"> <img class=icon  src="/assets/icons/gitlab.svg" alt=GitLab ></a> <a href="mailto:david.widmann__at__it.uu.se" title="email address"> <img class=icon  src="/assets/icons/email.svg" alt=email ></a> <a href="https://www.linkedin.com/in/david-widmann" title="LinkedIn profile"> <img class=icon  src="/assets/icons/linkedin.svg" alt=LinkedIn ></a> </div> </div> <div class=main-content-wrap > <div class=main-content > <div class=main-header > <a name=pagetop ></a> <a id=github  href="https://github.com/devmotion/widmann.dev/blob/master/blog/2020/07/palmerpenguins.md">Page source</a> </div> <div class=franklin-content ><h1 id=palmer_penguins_dataset ><a href="#palmer_penguins_dataset">Palmer penguins dataset</a></h1> <p>Recently the <a href="https://allisonhorst.github.io/palmerpenguins/">Palmer penguins dataset</a> was published as an <a href="https://cloud.r-project.org/web/packages/palmerpenguins/index.html">R package</a> <span class=bibref >(<a href="#horst2020">Horst, A. M., Hill, A. P., & Gorman, K. B. (2020)</a>)</span>. I created the Julia package <a href="https://github.com/devmotion/PalmerPenguins.jl"><code>PalmerPenguins.jl</code></a> to simplify its use with Julia and hence increase its adoption in the Julia community.</p> <h2 id=overview ><a href="#overview">Overview</a></h2> <p>The Palmer penguins dataset was proposed as an alternative to the <a href="https://en.wikipedia.org/wiki/Iris_flower_data_set"><code>iris</code> dataset</a> by <span class=bibref ><a href="#fisher1936">Fisher, R. A. (1936)</a></span> for data exploration and visualization.</p> <blockquote class=twitter-tweet > <p lang=en  dir=ltr > üêßüêßüêß <br><br> This penguin data is a great alternative to iris &amp; available for use by CC0 ü§© Thank you Dr. Kristen Gorman w/ <a href="https://twitter.com/UAFcfos?ref_src=twsrc%5Etfw">@UAFcfos</a>, Marty Downs w/ <a href="https://twitter.com/USLTER?ref_src=twsrc%5Etfw">@USLTER</a>, &amp; <a href="https://twitter.com/PalmerLTER?ref_src=twsrc%5Etfw">@PalmerLTER</a> for help, info &amp; making it available for use üéâ <br><br> Data, examples, &amp; use info here: <a href="https://t.co/dSIqWNFlVw">https://t.co/dSIqWNFlVw</a> üßµ 1/6 <a href="https://t.co/2Eu4AxoeZl">pic.twitter.com/2Eu4AxoeZl</a> </p> <br><br> &mdash; Allison Horst (@allison_horst) <a href="https://twitter.com/allison_horst/status/1270046399418138625?ref_src=twsrc%5Etfw">June 8, 2020</a> </blockquote> <script async src="https://platform.twitter.com/widgets.js" charset=utf-8 ></script> <p>Fisher was a vocal proponent of eugenics and published the <code>iris</code> dataset in the <em>Annals of Eugenics</em> in 1936 &#40;&#33;&#41;. Hence there is growing sentiment in the scientific community that the use of the <code>iris</code> dataset is inappropriate.</p> <blockquote> <p>One does not publish in the Annals of Eugenics in 1936 on a misunderstanding. <br/> <br/> By using this dataset in 2020, we are sending a very strong message. <br/> <br/> &mdash; <a href="https://armchairecology.blog/iris-dataset">Timoth√©e Poisot</a></p> </blockquote> <blockquote> <p>Many people using iris will be unaware that it was first published in work by R A Fisher, a eugenicist with vile and harmful views on race. In fact, the iris dataset was originally published in the Annals of Eugenics. It is clear to me that knowingly using work that was itself used in pursuit of racist ideals is totally unacceptable. <br/> <br/> &mdash; <a href="https://www.meganstodel.com/posts/no-to-iris">Megan Stodel</a></p> </blockquote> <blockquote> <p>I‚Äôve long known about Ronald Fisher‚Äôs eugenicist past, but I admit that I have often thoughtlessly turned to iris when needing a small, boring data set to demonstrate a coding or data principle. <br/> <br/> But Daniella and Timoth√©e Poisot are right: it‚Äôs time to retire iris. <br/> <br/> &mdash; <a href="https://www.garrickadenbuie.com/blog/lets-move-on-from-iris">Garrick Aden-Buie</a></p> </blockquote> <p>Apart from that, the <code>iris</code> dataset is quite boring: it contains no missing values and</p> <blockquote> <p>With the exception of one or two points, the classes are linearly separable, and so classification algorithms reach almost perfect accuracy. <br/> <br/> &mdash; <a href="https://armchairecology.blog/iris-dataset">Timoth√©e Poisot</a></p> </blockquote> <p>The Palmer penguins dataset consists of measurements of 344 penguins from three islands in the <a href="https://en.wikipedia.org/wiki/Palmer_Archipelago">Palmer Archipelago, Antarctica</a>, that were collected by <a href="https://www.uaf.edu/cfos/people/faculty/detail/kristen-gorman.php">Dr. Kristen Gorman</a> and the <a href="https://pal.lternet.edu/">Palmer Station, Antarctica LTER</a>. The simplified version of the dataset contains at most seven measurements for each penguin, namely the species &#40;<code>Adelie</code>, <code>Chinstrap</code>, and <code>Gentoo</code>&#41;, the island &#40;<code>Torgersen</code>, <code>Biscoe</code>, and <code>Dream</code>&#41;, the bill length &#40;measured in mm&#41;, the bill depth &#40;measured in mm&#41;, the flipper length &#40;measured in mm&#41;, the body mass &#40;measured in g&#41;, and the sex &#40;<code>male</code> and <code>female</code>&#41;. In total, 19 measurements are missing.</p> <h2 id=palmerpenguinsjl ><a href="#palmerpenguinsjl">PalmerPenguins.jl</a></h2> <p>The Julia package <code>PalmerPenguins.jl</code> is available in the standard Julia package registry, so you can install it and load it in the usual way by running</p> <pre><code class="julia-repl hljs"><span class=hljs-meta >julia&gt;</span><span class=julia > <span class=hljs-keyword >import</span> Pkg; Pkg.add(<span class=hljs-string >&quot;PalmerPenguins&quot;</span>)
</span>
<span class=hljs-meta >julia&gt;</span><span class=julia > <span class=hljs-keyword >using</span> PalmerPenguins</span></code></pre> <p>in the Julia REPL. The package uses <a href="https://github.com/oxinabox/DataDeps.jl"><code>DataDeps.jl</code></a> to download a fixed &#40;and hence reproducible&#41; version of the dataset once instead of including a copy of the original dataset.</p> <p>As explained in the <a href="https://github.com/devmotion/PalmerPenguins.jl/blob/master/README.md">package&#39;s README</a>, the simplified and the raw version of the Palmer penguins dataset can be loaded in a <a href="https://github.com/JuliaData/Tables.jl">Tables.jl-compatible format</a>. Hence, e.g., we can inspect the names and types of the features in the simplified and the raw version by running</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> PalmerPenguins
<span class=hljs-keyword >using</span> Tables

<span class=hljs-keyword >const</span> TABLE = PalmerPenguins.load()

Tables.schema(TABLE)</code></pre> <pre><code class="plaintext hljs">DataDeps.DisabledError(&quot;DataDeps download disabled, as we appear to be in a CI environment, and the environment variable `DATADEPS_ALWAYS_ACCEPT` is not set.\nIf this is indeed running in a headless CI environment, then set the `DATADEPS_ALWAYS_ACCEPT` environment variable to `true` to bypass the accept download prompt (if you do wish to always accept.)\nIf not, then either unset the `CI` environment variable from true, or set `DATADEPS_ALWAYS_ACCEPT` to `false` for the normal prompt behaviour.&quot;)
</code></pre> <p>and</p> <pre><code class="julia hljs"><span class=hljs-keyword >const</span> TABLE_RAW = PalmerPenguins.load(; raw = <span class=hljs-literal >true</span>)

Tables.schema(TABLE_RAW)</code></pre> <pre><code class="plaintext hljs">DataDeps.DisabledError(&quot;DataDeps download disabled, as we appear to be in a CI environment, and the environment variable `DATADEPS_ALWAYS_ACCEPT` is not set.\nIf this is indeed running in a headless CI environment, then set the `DATADEPS_ALWAYS_ACCEPT` environment variable to `true` to bypass the accept download prompt (if you do wish to always accept.)\nIf not, then either unset the `CI` environment variable from true, or set `DATADEPS_ALWAYS_ACCEPT` to `false` for the normal prompt behaviour.&quot;)
</code></pre> <p>We also see that the names of the features in the simplified dataset are normalized to lowercase characters without whitespace and brackets.</p> <p>You might want to convert the tables to a <code>DataFrame</code> object for downstream analyses. The following code extracts the first five rows of the simplified dataset:</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> DataFrames

first(DataFrame(TABLE), <span class=hljs-number >5</span>)</code></pre> <pre><code class="plaintext hljs">UndefVarError: TABLE not defined
</code></pre> <p>Data can be extracted with the Tables.jl-interface as well without creating a <code>DataFrame</code> object, as shown in the following visualizations of the Palmer penguins dataset. The following plots replicate the <a href="https://allisonhorst.github.io/palmerpenguins/#examples">official examples</a> &#40;even interactively&#33;&#41;.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> ColorBrewer
<span class=hljs-keyword >using</span> PlotlyJS

<span class=hljs-keyword >const</span> COLORS = palette(<span class=hljs-string >&quot;Dark2&quot;</span>, <span class=hljs-number >3</span>)

trace = scatter(
    mode = <span class=hljs-string >&quot;markers&quot;</span>,
    x = Tables.getcolumn(TABLE, :flipper_length_mm),
    y = Tables.getcolumn(TABLE, :body_mass_g),
    transforms = [
        attr(
            <span class=hljs-keyword >type</span> = <span class=hljs-string >&quot;groupby&quot;</span>,
            groups = Tables.getcolumn(TABLE, :species),
            styles = [
                attr(target = <span class=hljs-string >&quot;Gentoo&quot;</span>, value_marker_color = COLORS[<span class=hljs-number >1</span>]),
                attr(target = <span class=hljs-string >&quot;Adelie&quot;</span>, value_marker_color = COLORS[<span class=hljs-number >2</span>]),
                attr(target = <span class=hljs-string >&quot;Chinstrap&quot;</span>, value_marker_color = COLORS[<span class=hljs-number >3</span>]),
            ],
        ),
    ],
)

layout = Layout(;
    title = <span class=hljs-string >&quot;Flipper length and body mass&quot;</span>,
    xaxis = attr(title = <span class=hljs-string >&quot;Flipper length (mm)&quot;</span>),
    yaxis = attr(title = <span class=hljs-string >&quot;Body mass (g)&quot;</span>),
)
p = PlotlyJS.plot([trace], layout)</code></pre> UndefVarError: TABLE not defined <pre><code class="julia hljs">trace = histogram(
    x = Tables.getcolumn(TABLE, :flipper_length_mm),
    opacity = <span class=hljs-number >0.75</span>,
    transforms = [
        attr(
            <span class=hljs-keyword >type</span> = <span class=hljs-string >&quot;groupby&quot;</span>,
            groups = Tables.getcolumn(TABLE, :species),
            styles = [
                attr(target = <span class=hljs-string >&quot;Gentoo&quot;</span>, value_marker_color = COLORS[<span class=hljs-number >1</span>]),
                attr(target = <span class=hljs-string >&quot;Adelie&quot;</span>, value_marker_color = COLORS[<span class=hljs-number >2</span>]),
                attr(target = <span class=hljs-string >&quot;Chinstrap&quot;</span>, value_marker_color = COLORS[<span class=hljs-number >3</span>]),
            ],
        ),
    ],
)

layout = Layout(;
    title = <span class=hljs-string >&quot;Flipper length&quot;</span>,
    xaxis = attr(title = <span class=hljs-string >&quot;Flipper length (mm)&quot;</span>),
    yaxis = attr(title = <span class=hljs-string >&quot;Frequency&quot;</span>),
    barmode = <span class=hljs-string >&quot;overlay&quot;</span>,
)
p = PlotlyJS.plot([trace], layout)</code></pre> UndefVarError: TABLE not defined <h2 id=summary ><a href="#summary">Summary</a></h2> <p>It seems there is no good reason anymore to use the controversial <code>iris</code> dataset if you are looking for a dataset for data exploration or visualization. The Palmer penguins dataset is a good alternative but, of course, <a href="https://www.meganstodel.com/posts/no-to-iris/">not the only one</a>&#41;. I published a dedicated Julia package <a href="https://github.com/devmotion/PalmerPenguins.jl"><code>PalmerPenguins.jl</code></a> that provides access to the raw and simplified versions of this dataset, similar to the original R package. Its main advantage is that you don&#39;t have to download and load the dataset manually.</p> <h2 id=references ><a href="#references">References</a></h2> <ul> <li><p><a id=fisher1936  class=anchor ></a> Fisher, R. A. &#40;1936&#41;. The use of multiple measurements in taxonomic prolems. <em>Annals of Eugenics</em>, <em>7</em>&#40;2&#41;, 179‚Äì188. doi:<a href="https://doi.org/10.1111/j.1469-1809.1936.tb02137.x">10.1111/j.1469-1809.1936.tb02137.x</a></p> <li><p><a id=horst2020  class=anchor ></a> Horst, A. M., Hill, A. P., &amp; Gorman, K. B. &#40;2020&#41;. <em>palmerpenguins: Palmer Archipelago &#40;Antarctica&#41; penguin data</em>. R package version 0.1.0. doi:<a href="https://doi.org/10.5281/zenodo.3960218">10.5281/zenodo.3960218</a></p> </ul> <div class=main-footer > <div class=copyright > &copy; David Widmann. Last modified: July 28, 2020. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>. </div> </div> </div> </div> </div> </div> <!-- end of class page-wrap-->